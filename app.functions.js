var eng = {
	'tit': 'Title',
	'ano': 'Year',
	'dur': 'Running time',
	'tag': 'Tagline',
	'dir': 'Directed by',
	'act': 'Cast',
	'comp': 'Production company',
	'prod': 'Produced by',
	'exprod': 'Executive Producers',
	'gui': 'Written by',
	'adapt': 'Adapted from',
	'clas': 'Rating',
	'pai': 'Country',
	'idi_film': 'Language',
	'gen': 'Genres',
	'lanz': 'Release Date',
	'rec': 'Box Office',
	'desc': 'Description',
	'pre': 'Notable Awards Won',
	'pre-nom': 'Notable Awards Nominations',
	'tra': 'Trailer',
	'web': 'Website',
	'webmenu': 'Web',
	'nom': 'Name',
	'not': 'Notable For',
	'eda': 'Age',
	'fec-nac': 'Date of Birth',
	'mue': 'Death',
	'cau-mue': 'Cause of Death',
	'nac': 'Nationality',
	'alt': 'Height',
	'bio': 'Bio',
	'edu': 'Education',
	'par': 'Partners',
	'hij': 'Children',
	'padr': 'Parents',
	'film': 'Notable Films Appearences',
	'film_app': 'Personal Appearences in Films',
	'tv': 'Notable TV Appearences',
	'act-dir': 'Director',
	'act-pro': 'Producer',
	'act-ex': 'Executive Producer',
	'act-gui': 'Writer',
	'mus': 'Music',
	'org': 'Organizations',
	'trab': 'Employment History',
	'sep': ',',
	'img': 'Load Images? (When Available)',
	'idi': 'Search Language / Idioma Del Buscador',
	'sync': 'Sync Data?',
	'nyc': 'Notes & Config',
	'nycnotes': 'Notes',
	'nycconfig': 'Configuration',
	'bus': 'Search',
	'yes': 'Yes',
	'no': 'No',
	'pel': 'Film',
	'pers': 'Person',
	'search': 'Search More Results Online',
	'buscar-otro-idi': 'Buscar en español',
	'mostrar-otro-idi': 'Mostrar en español',
	'h1': 'l\'m looking for..',
	'place': 'Film / TV Show / Person',
	'pers-det': 'Personal Details',
	'pers-lif': 'Personal Life',
	'filmograf': 'Filmography',
	'detras-de-camara': 'Behind the camera: Films',
	'detras-de-camara-tv': 'Behind the camera: TV',
	'otros-trabajos': 'Other Works',
	'premios-ganados': 'Awards',
	'gen-inf': 'General Info',
	'info_prod': 'Production',
	'premios': 'Awards',
	'movie': 'Movie',
	'resultados': 'Results',
	'resultados_offline': 'Results Offline',
	'resultados_offline_none': 'There are no results offline',
	'born': 'Born',
	'random': 'Random Article',
	'histo': 'History',
	'nothing': 'Nothing has been searched yet!',
	'nothing2': 'Se puede configurar la aplicación en español <a href="#" onclick="$(\'#showOptions\').click();">Aquí</a>',
	'serie': 'Series',
	'cade': 'Orginal Network',
	'actual': 'Present',
	'trans': 'Original Run',
	'curr_prod': 'Currently in production',
	'song': 'Theme',
	'setting': 'Known Settings',
	'spun_off': 'Spun Off',
	'spin_off': 'Spin Off',
	'episod': 'Episodes',
	'episod_temp': 'Seasons',
	'episod_cant': 'Episodes',
	'episod_dur': 'Running Time',
	'orig_run': 'Original Run',
	'episod-mssg': 'The episode´s list is updated periodically but it may not be up to date when it is accessed.',
	'episod-mssg-err': 'The episode´s list can\'t be loaded correctly. It may be too big or contain errors.',
	'episod-list': 'Episode List',
	'episod-gui': 'Writers',
	'episod-creat': 'Creators',
	'temp': 'Season',
	'temp_esp': 'Special Episodes',
	'hist_tit': 'Last Articles searched',
	'hist_err': 'The History could not be loaded, please try again',
	'img_wr': 'WiFi + Data',
	'img_w': 'Only WiFi',
	'tvcreat': 'TV Show Creator',
	'tvprod': 'TV Show Producer',
	'tvwrit': 'Writer',
	'otro_idioma': '(SPANISH) ',
	'busqueda_tag': 'Searched',
	'no_matches': 'Sorry, No Matches!',
	'conn_problem': 'Sorry, Connection Problem!',
	'sync_wr': 'WiFi + Data *',
	'sync_wr_exp': 'Syncs articles searched with articles searched by other users and helps providing offline functionality',
	'sync_wr_msg': '* It is not recommended if you have a limited data usage',
	'sync_w': 'Only WiFi',
	'seq': 'Sequel',
	'preq': 'Prequel',
	'exit': 'Press twice to exit',
	'actriz': 'Actor/Actress',
	'leaving': 'You are about to leave the App, are you sure?',
	'no_img': 'No Image Available',
	'imdbr': 'IMDB Rating',
	'plotdesc': 'PLOT & Description'
};
var esp = {
	'tit': 'Título',
	'ano': 'Año',
	'dur': 'Duración',
	'tag': 'Lema',
	'dir': 'Dirigida por',
	'act': 'Protagonistas',
	'comp': 'Productora',
	'prod': 'Producción',
	'exprod': 'Producción Ejecutiva',
	'gui': 'Guion',
	'adapt': 'Adaptación',
	'clas': 'Clasificación',
	'pai': 'País',
	'idi_film': 'Idioma',
	'gen': 'Género',
	'lanz': 'Lanzamiento',
	'rec': 'Recaudación',
	'desc': 'Descripción',
	'pre': 'Premios Destacados',
	'pre-nom': 'Nominaciones Destacadas',
	'tra': 'Trailer',
	'web': 'Sitio Web',
	'webmenu': 'Web',
	'nom': 'Nombre',
	'not': 'Destacado por',
	'eda': 'Edad',
	'fec-nac': 'Fecha de Nacimiento',
	'mue': 'Muerte',
	'cau-mue': 'Causa de Muerte',
	'nac': 'Nacionalidad',
	'alt': 'Altura',
	'bio': 'Biografía',
	'edu': 'Educación',
	'par': 'Parejas',
	'hij': 'Hijos',
	'padr': 'Padres',
	'film': 'Apariciones destacadas en Cine',
	'film_app': 'Apariciones personales en Cine',
	'tv': 'Apariciones destacadas en TV',
	'act-dir': 'Director',
	'act-pro': 'Productor',
	'act-ex': 'Productor Ejecutivo',
	'act-gui': 'Escritor',
	'mus': 'Música',
	'org': 'Organizaciones',
	'trab': 'Historial de Empleos',
	'sep': '.',
	'img': '¿Cargar Imágenes? (Cuando estén disponibles)',
	'idi': 'Idioma Del Buscador / Search Language',
	'sync': '¿Sincronizar Datos?',
	'nyc': 'Notas & Configuración',
	'nycnotes': 'Notas',
	'nycconfig': 'Configuración',
	'bus': 'Buscar',
	'yes': 'Sí',
	'no': 'No',
	'pel': 'Película',
	'pers': 'Persona',
	'search': 'Buscar Más Resultados Online',
	'buscar-otro-idi': 'Search in English',
	'mostrar-otro-idi': 'Show in English',
	'h1': 'Estoy Buscando...',
	'place': 'Película / Serie / Individuo',
	'pers-det': 'Detalles Personales',
	'pers-lif': 'Vida Personal',
	'filmograf': 'Filmografía',
	'detras-de-camara': 'Detrás de cámara: Cine',
	'detras-de-camara-tv': 'Detrás de cámara: Tv',
	'otros-trabajos': 'Otros Trabajos',
	'premios-ganados': 'Premios',
	'gen-inf': 'Información General',
	'info_prod': 'Producción',
	'premios': 'Premios',
	'movie': 'Película de',
	'resultados': 'Resultados',
	'resultados_offline': 'Resultados Offline',
	'resultados_offline_none': 'No hay resultados offline',
	'born': 'Nacido en',
	'random': 'Artículo Aleatorio',
	'histo': 'Historial',
	'nothing': '¡Aún no han buscado nada!',
	'nothing2': 'You can setup the app in english <a href="#" onclick="$(\'#showOptions\').click();">Here</a>',
	'serie': 'Serie de',
	'cade': 'Cadena',
	'actual': 'Actualidad',
	'trans': 'Emisión',
	'curr_prod': 'Actualmente en producción',
	'song': 'Canción original',
	'setting': 'Escenografías Conocidas',
	'spun_off': 'Derivada de',
	'spin_off': 'Series Derivadas',
	'episod': 'Episodios',
	'episod_temp': 'Temporadas',
	'episod_cant': 'Episodios',
	'episod_dur': 'Duración',
	'orig_run': 'Transmisión',
	'episod-mssg': 'La lista de episodios se actualiza periódicamente, pero podría no estar actualizada al momento de accederla.',
	'episod-mssg-err': 'La lista de episodios no se puede cargar correctamente. Puede ser muy grande o contener errores.',
	'episod-list': 'Lista de Episodios',
	'episod-gui': 'Guionistas',
	'episod-creat': 'Creadores',
	'temp': 'Temporada',
	'temp_esp': 'Episodios Especiales',
	'hist_tit': 'Últimos artículos buscados',
	'hist_err': 'No se ha podido cargar el historial. Por favor intente nuevamente.',
	'img_wr': 'WiFi + Redes Móviles',
	'img_w': 'Sólo WiFi',
	'tvcreat': 'Series Creadas',
	'tvprod': 'Series Producidas',
	'tvwrit': 'Escritor',
	'otro_idioma': '(INGLÉS) ',
	'busqueda_tag': 'Búsqueda',
	'no_matches': 'Lo sentimos, no hay coincidencias.',
	'conn_problem': 'Lo sentimos, problemas de conexión.',
	'sync_wr': 'WiFi + Redes Móviles *',
	'sync_wr_exp': 'Sincroniza los artículos buscados con aquellos buscados por otros usuarios y así facilita la funcionalidad offline',
	'sync_wr_msg': '* Se recomienda tener un plan de datos ilimitados',
	'sync_w': 'Sólo WiFi',
	'seq': 'Secuela',
	'preq': 'Precuela',
	'exit': 'Pulse dos veces para salir',
	'actriz': 'Actor/Actriz',
	'leaving': 'Esta a punto de dejar la aplicación. ¿Está seguro?',
	'no_img': 'No hay imagen disponible',
	'imdbr': 'Rating IMDB',
	'plotdesc': 'Descripcion'
};
var tags = {
	'en': eng,
	'es': esp
};



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Por si acaso	  
///////////////////////////
function restartFilmsSin() {
	showGif();
	dbSin.allDocs({include_docs: true, descending: true}, function(err, doc) {
		console.log(doc.rows.length);
		var r = confirm("¿Estás seguro?");
		if (r == true) {
			doc.rows.forEach(function(film) {
				dbSin.remove(film.doc);
			});
		}
	});
}
function restartFilmsCon() {
	showGif();
	dbCon.allDocs({include_docs: true, descending: true}, function(err, doc) {
		console.log(doc.rows.length);
		var r = confirm("¿Estás seguro?");
		if (r == true) {
			doc.rows.forEach(function(film) {
				dbCon.remove(film.doc);
			});
		}
	});
}





////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Extra functions	  
///////////////////////////
function showGif(time){
	$("#showCarga").click();	
}
function guid() {
	function s4() {
		return Math.floor((1 + Math.random()) * 0x10000)
				   .toString(16)
				   .substring(1);
	}
	return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
		   s4() + '-' + s4() + s4() + s4();
}
function month(fecha, lang){
	if (lang == 'en') var x = 0; else var x = 1;
	var months = [['-','January','February','March','April','May','June','July','August','September','October','November','December'],
				['-','Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre']];
	switch(fecha) {
		case '01':
			return months[x][1];
			break;
		case '02':
			return months[x][2];
			break;
		case '03':
			return months[x][3];
			break;
		case '04':
			return months[x][4];
			break;
		case '05':
			return months[x][5];
			break;
		case '06':
			return months[x][6];
			break;
		case '07':
			return months[x][7];
			break;
		case '08':
			return months[x][8];
			break;
		case '09':
			return months[x][9];
			break;
		case '10':
			return months[x][10];
			break;
		case '11':
			return months[x][11];
			break;
		case '12':
			return months[x][12];
			break;
	}
}
function addPoints(n, texto) {
	texto = texto.substr(0, texto.length - 2)
    var ret = [];
	var mod = texto.length % n;
    for(var i=0; i < texto.length; i += n) {
		if (mod != 0){
			ret.push(texto.substr(i, mod));
			i = mod - n;
			mod = 0;
		}else{
			ret.push(texto.substr(i, n));
		}
    }
    return ret;
};
function processAwards(awards, idn, lang){
	var items = awards.split(", ");
	var result = '';
	jQuery.each( items, function( i, val ) {
		if (i > 0) $('#'+idn).append(', ');		
		$('#'+idn).append("<a id='"+idn+"0"+i+"'>"+val+"</a>")
		$("#"+idn+"0"+i).unbind("click");
		$("#"+idn+"0"+i).click(function() {
			showTablaII(val, lang);
		});		
	});
}
function parseFecha(items, lang){
	var fecha = '';
	if (lang == 'en') fecha = parseFechaENG(items);
	else fecha = parseFechaESP(items);
	return fecha;
}
function parseFechaENG(items){
	var fecha = '';
	if ((items[1] != undefined)&&(items[1] != "")){
		fecha = fecha + month(items[1], 'en');
	}
	if ((items[2] != undefined)&&(items[2] != "")){
		fecha = fecha +' '+items[2];
	}
	if ((items[0] != undefined)&&(items[0] != "")){
		if (fecha != '') fecha = fecha +', ';
		fecha = fecha +items[0];
	}
	if(fecha == '') fecha = '-'
	return fecha;
}
function parseFechaESP(items){
	var fecha = '';
	if ((items[1] != undefined)&&(items[2] != "")){
		fecha = fecha + items[2];
	}
	if ((items[1] != undefined)&&(items[1] != "")){
		if (fecha != '') fecha = fecha +' de ';
		fecha = fecha + month(items[1], 'es');
	}
	if ((items[0] != undefined)&&(items[0] != "")){
		if (fecha != '') fecha = fecha +' de ';
		fecha = fecha +items[0];
	}
	if(fecha == '') fecha = '-'
	return fecha;
}
function updateConfig(){
	mostrarImagen = $('#mostrarImagen').val();
	lang = $('#language').val();
	syncData = $('#syncData').val();
	dbSin.get('config', function(err, otherDoc) {
		if (otherDoc != undefined){
			var config = {
				_id: 'config',
				language: lang,
				mostrarImagen: mostrarImagen,
				syncData: syncData,
				uuid: otherDoc.uuid
			};	
			console.log(config);
			dbSin.put(config, config, otherDoc._rev, function(err, response) {
				if (err) {
					console.log('Error dbSin: '+err);
				}
			});
		}
	});
	changeTagsHTML(lang);
}
function changeTagsHTML(lang){
	$("#show-images").empty();
	$("#idioma").empty();	
	$("#nyc").empty();	
	$("#bus").empty();	
	$("#search-link").empty();	
	$("#si-sync").empty();	
	$("#film").empty();	
	$("#person").empty();	
	$("#h1").empty();	
	$("#histo").empty();	
	$("#nycconfig").empty();	
	$("#nycnotes").empty();	
	$("#sinchronize").empty();	
	$("#title-history").empty();	
	$("#img_wr").empty();	
	$("#img_w").empty();	
	$("#buscar").empty();	
	$("#buscar2").empty();	
	$("#sync_wr").empty();	
	$("#sync_w").empty();	
	$("#sync_wr_msg").empty();	
	$("#sync_wr_exp").empty();	
	$("#show-images").append(getTag(lang, 'img'));
	$("#idioma").append(getTag(lang, 'idi'));	
	$("#nyc").append(getTag(lang, 'nyc'));
	$("#bus").append(getTag(lang, 'bus'));
	$('#input_search').attr("placeholder",getTag(lang, 'place'))
	$("#buscar").append(getTag(lang, 'bus'));
	$("#buscar2").append(getTag(lang, 'bus'));
	$("#search-link").append(getTag(lang, 'bus'));
	$("#si-sync").append(getTag(lang, 'yes'));
	$("#film").append(getTag(lang, 'pel'));
	$("#person").append(getTag(lang, 'pers'));
	$("#h1").append(getTag(lang, 'h1'));
	$("#histo").append(getTag(lang, 'histo'));
	$("#nycconfig").append(getTag(lang, 'nycconfig'));
	$("#nycnotes").append(getTag(lang, 'nycnotes'));
	$("#sinchronize").append(getTag(lang, 'sync'));
	$("#title-history").append(getTag(lang, 'histo'));
	$("#img_wr").append(getTag(lang, 'img_wr'));
	$("#img_w").append(getTag(lang, 'img_w'));
	$("#sync_wr").append(getTag(lang, 'sync_wr'));
	$("#sync_w").append(getTag(lang, 'sync_w'));
	$("#sync_wr_msg").append(getTag(lang, 'sync_wr_msg'));
	$("#sync_wr_exp").append(getTag(lang, 'sync_wr_exp'));


}
function getTag(lang, tag){
	return tags[lang][tag];
}
function estaProhibido(val){
	var prohibido = false;
	var texto;
	var prohibidos = ['pornography','pornographic','porno','pornografía','pornografia','Pornography','Pornographic','Porno','Pornografía','Pornografia'];
	if ((val.notable != undefined) && (val.notable.name != '')){
		texto = val.notable.name;
		if (texto == 'Adult Film'){
			prohibido =  true;		
		}else{
			var items = texto.split(" ");
			jQuery.each( items, function( i, val ) {
				if (prohibidos.indexOf(items[i]) > -1) 
					prohibido =  true;
			});	
		}
	}
	return prohibido;
}



////isFilm & isSerie
function isFilm(data){
	var isFilm = false;
	jQuery.each( data.values, function( i, val ) {
		if (val.id == '/film/film') isFilm = true;
	});	
	return isFilm;
}
function isSerie(data){
	var isSerie = false;
	jQuery.each( data.values, function( i, val ) {
		if (val.id == '/tv/tv_program') isSerie = true;
	});	
	return isSerie;
}



//// Registrossss
function addRegistro(base, replic, tipo, resultado, texto, funcion, red, date) {
	var registro = {
		base: base,
		replic: replic,
		tipo: tipo,
		resultado: resultado,
		texto: texto,
		funcion: funcion,
		red: red,
		uuid: uuid,
		date: date
	};	
	registros.push(registro);
}
function guardarRegistros() {
	dbSin.get('logs', function(err, otherDoc) {
		if (otherDoc != undefined){
			jQuery.each( registros, function( i, val ) {
				otherDoc.log.push(registros[i]);
			});
			registros = [];
			var logs = {
				_id: 'logs',
				log: otherDoc.log
			};	
			dbSin.put(logs, logs, otherDoc._rev, function(err, response) {});
		}
	});
}
function persistirRegistros(){
	dbSin.get('logs', function(err, otherDoc) {
		if (otherDoc != undefined){
			if(!requestSent) {
				requestSent = true;
				$.ajax({
					url: "http://susperreguiprop.com.ar/filmdatabase/_persistirRegistros.php",
					type: "POST",
					data: {
						'registros': otherDoc.log
					},
					success: function (data) {
						console.log('-------LOGS POSTED--------');
						otherDoc.log = [];
						var logs = {
							_id: 'logs',
							log: otherDoc.log
						};	
						dbSin.put(logs, logs, otherDoc._rev, function(err, response) {});
					},
					error: function (err) {
						console.log('----LOGS NOOOOOOT POSTED');
					},
					complete: function() {
						requestSent = false;
					}
				});
			}
		}
	});
}
function guardarHistory(texto, type) {
	dbSin.get('history', function(err, otherDoc) {
		if (otherDoc != undefined){
			var registro = [];
			registro.push(texto);
			registro.push(type);
			otherDoc.hist.unshift(registro);
			dbSin.put(otherDoc, otherDoc, otherDoc._rev, function(err, response) {});
		}
	});
}
function checkConnection() {
	var networkState = navigator.connection.type;

	var states = {};
	states[Connection.UNKNOWN]  = 'Unknown';
	states[Connection.ETHERNET] = 'Ethernet';
	states[Connection.WIFI]     = 'WIFI';
	states[Connection.CELL_2G]  = '2G';
	states[Connection.CELL_3G]  = '3G';
	states[Connection.CELL_4G]  = '4G';
	states[Connection.CELL]     = 'Generic';
	states[Connection.NONE]     = 'NO';

	return states[networkState];
}